<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BibTexViz</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.7/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-LN+7fdVzj6u52u30Kp6M/trliBMCMKTyK833zpbD+pXdCLuTusPj697FH4R/5mcr" crossorigin="anonymous">

    <link rel="stylesheet" href="static/css/style.css">
</head>
<body>
    <!-- Título y subtítulo centrados -->
    <div class="text-center mt-4 mb-4">
        <h1 class="title-gradient"><a href="/" style="text-decoration: none; color: inherit;">BibTex Visualization</a></h1>
        <h4 class="subtitle-colored">Transform .bibtex files into powerful visualizations to explore and analyze research productivity.</h4>
    </div>

    <div class="container-fluid mt-3">
        <div class="row">
            <div class="col-md-3">
                <div class="card card-researcher">
                    <div class="card-header">
                        <ul class="nav nav-tabs card-header-tabs" id="researcherTab" role="tablist">
                            <li class="nav-item" role="presentation">
                                <button class="nav-link active" id="info-tab" data-bs-toggle="tab" data-bs-target="#info" type="button" role="tab">
                                    Researcher Info
                                </button>
                            </li>
                            <li class="nav-item" role="presentation">
                                <button class="nav-link" id="about-tab" data-bs-toggle="tab" data-bs-target="#about" type="button" role="tab">
                                    About / Help
                                </button>
                            </li>
                        </ul>
                    </div>
                    <!-- Contenido de Researcher Information -->
                    <div class="card-body tab-content" id="researcherTabContent">
                        <div class="tab-pane fade show active" id="info" role="tabpanel">
                            <form id="dataForm">
                                <div class="mb-3">
                                    <label for="researcherName" class="form-label">Researcher</label>
                                    <input type="text" class="form-control" id="researcherName" required>
                                    <div class="invalid-feedback">
                                        Please, fill in your name.
                                    </div>
                                </div>
                                <div class="mb-3">
                                    <label for="bibFile" class="form-label">Upload .bib File (optional)</label>
                                    <input class="form-control" type="file" id="bibFile" accept=".bib">
                                </div>
                                <button type="submit" class="btn btn-primary">Submit</button>
                            </form>
                        </div>
                    </div>

                    <!-- Contenido de About / Help -->
                    <div class="tab-pane fade" id="about" role="tabpanel">
                        <div class="card">
                            <div class="card-body">
                                <h5 class="card-title">Visualization of a publication</h5>
                                Publications are shown as colored squares in a bar chart timeline. Each bar represents a year, with all publications for that year stacked vertically. Within a year, publications are ordered from top to bottom by type, ranking, awards, and date, in that order of precedence. The type order is specified in the following section.
                                Each square is interactive, allowing you to click and view publication details such as title, authors, DOI, and more.
                                <p class="card-text"><img src="static/images/publication_schema.png" alt="Visualization example"></p>
                            </div>
                        </div>

                        <div class="card">
                            <div class="card-body">
                                <h5 class="card-title">Publication type:</h5>
                                <p class="card-text">The type of a publication is automatically extracted from the BibTeX entry and encoded with colors following a schema similar to that used by <a href="https://dblp.org/">DBLP</a>.
                                    <div class="color-legend" style="display: flex; flex-direction: column; gap: 12px; margin-top: 10px;">
                                    
                                    
                                    <div style="display: flex; align-items: center; gap: 8px;">
                                        <div style="width: 20px; height: 20px; background-color: #ffd500;"></div>
                                        <div>
                                            <strong>Book and PhD thesis</strong>
                                            <small>From BibTeX entry <code>@book</code> or <code>@phdthesis</code></small>
                                        </div>
                                    </div>
                                    <div style="display: flex; align-items: center; gap: 8px;">
                                        <div style="width: 20px; height: 20px; background-color: #c32b72;"></div>
                                        <div>
                                            <strong>Journal</strong>
                                            <small>From BibTeX entry <code>@article</code></small>
                                        </div>
                                    </div>
                                    <div style="display: flex; align-items: center; gap: 8px;">
                                        <div style="width: 20px; height: 20px; background-color: #196ca3;"></div>
                                        <div>
                                            <strong>International conference</strong>
                                            <small>From BibTeX entry <code>@inproceedings</code></small>
                                        </div>
                                    </div>
                                    <div style="display: flex; align-items: center; gap: 8px;">
                                        <div style="width: 20px; height: 20px; background-color: #2ecc71;"></div>
                                        <div>
                                            <strong>International workshop</strong>
                                            <small>From BibTeX entry <code>@inproceedings</code> with the <code>Workshop</code> or <code>WS</code> word in the <code>booktitle</code></small>
                                        </div>
                                    </div>
                                    <div style="display: flex; align-items: center; gap: 8px;">
                                        <div style="width: 20px; height: 20px; background-color: #e68019;"></div>
                                        <div>
                                            <strong>National conference</strong>
                                            <small>From BibTeX entry <code>@inproceedings</code>, requires <code>scope={national}</code> in the entry (not present in DBLP)</small>
                                        </div>
                                    </div>
                                    <div style="display: flex; align-items: center; gap: 8px;">
                                        <div style="width: 20px; height: 20px; background-color: #885522;"></div>
                                        <div>
                                            <strong>Data and artifacts</strong>
                                            <small>From BibTeX entry <code>@misc</code> with <code>publisher={Zenodo}</code></small>
                                        </div>
                                    </div>
                                    <div style="display: flex; align-items: center; gap: 8px;">
                                        <div style="width: 20px; height: 20px; background-color: #33c3ba;"></div>
                                        <div>
                                            <strong>Editorship</strong>
                                            <small>From BibTeX entry <code>@proceedings</code></small>
                                        </div>
                                    </div>
                                    <div style="display: flex; align-items: center; gap: 8px;">
                                        <div style="width: 20px; height: 20px; background-color: #606b70;"></div>
                                        <div>
                                            <strong>Informal and other publications</strong>
                                            <small>Other BibTeX entries such as <code>@article</code> with <code>journal={CoRR}</code>, <code>@techreport</code>, <code>@misc</code>, etc.</small>
                                        </div>
                                    </div>
                                </div>
                                </p>
                            </div>
                        </div>

                        <div class="card">
                            <div class="card-body">
                                <h5 class="card-title">Ranking</h5>
                                <ul class="card-text">
                                    <li>
                                        <strong>Journals:</strong> The ranking is based on the <a href="https://clarivate.com/academia-government/scientific-and-academic-research/research-funding-analytics/journal-citation-reports/">Journal Citation Reports (JCR)</a>, which indicate their quartile (Q1 to Q4).
                                    Since there is currently no free public API for JCR, this information cannot be obtained automatically. It must be manually added to the BibTeX entry, for example: <code>jcr={Q1}</code>. More detailed information can also be included and will be shown in the publication details, e.g., <code>jcr={Q1 (9/131) Computer Science, Software Engineering. Impact factor: 6.5}</code>, as long as it starts with the quartile.
                                    Non-indexed journals are indicated as <code>jcr={}</code> and appear in the visualization with a <code>-</code>, while if the <code>jcr</code> field is missing, the ranking is considered unknown and shown as <code>?</code>.
                                    </li>
                                    <li>
                                        <strong>Conferences:</strong> The ranking is based on the <a href="https://portal.core.edu.au/conf-ranks/">ICORE ranking</a>, which classifies conferences from A* to C.
                                    This information is automatically extracted from the .csv file provided on the ICORE portal.
                                    Non-indexed conferences are displayed with a <code>-</code> in the visualization.
                                    </li>
                                    <li>
                                        <strong>Others:</strong> Other publications are not ranked by default and appear with a <code>-</code> in the visualization. However, you can specify their ranking using a <code>calification</code> BibTex entry. For example, to indicate the rating of a PhD thesis, use <code>calification={Cum Laude}</code>, which will display "Cum Laude" as its ranking in the visualization.
                                    </li>
                                </ul>
                            </div>
                        </div>

                        <div class="card">
                            <div class="card-body">
                                <h5 class="card-title">Contact</h5>
                                <p class="card-text"><a
                                        href="https://sites.google.com/view/josemiguelhorcas">José
                                        Miguel Horcas</a></p>
                                <a href="mailto:&#104;&#111;&#114;&#099;&#097;&#115;&#064;&#117;&#109;&#097;&#046;&#101;&#115;?subject=[BibTexViz]"
                                    class="btn btn-outline-primary" role="button"
                                    aria-pressed="true">Contact</a>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="col-md-9">
                <div class="card card-publications">
                    <div class="card-header d-flex justify-content-between align-items-center">
                        <span>Publications</span>
                        <div class="dropdown">
                            <button class="btn btn-sm btn-light" type="button" data-bs-toggle="dropdown" aria-expanded="false">
                                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-three-dots-vertical" viewBox="0 0 16 16">
                                    <path d="M9.5 13a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0zm0-5a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0zm0-5a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0z"/>
                                </svg>
                            </button>
                            <ul class="dropdown-menu dropdown-menu-end">
                                <li><a class="dropdown-item" href="#" id="downloadSvg">Download as SVG</a></li>
                                <li><a class="dropdown-item" href="#" id="downloadPng">Download as PNG</a></li>
                                <li><a class="dropdown-item" href="#" id="downloadPdf">Download as PDF</a></li>
                            </ul>
                        </div>
                    </div>
                    <div class="card-body" style="overflow-x: auto;">
                        <div style="min-width: 1200px;"></div>
                            <svg id="chart"></svg>
                        </div> 
                    </div>
                </div>
            </div>
        </div>
    </div>


    <!-- Footer -->
    <footer class="bg-dark text-white text-center py-3 mt-4">
        &copy; 2025 José Miguel Horcas. All rights reserved.
    </footer>

    <!-- Modal for publication details -->
    <div class="modal fade" id="publicationModal" tabindex="-1" aria-labelledby="publicationModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered modal-lg">
            <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="publicationModalLabel">Publication Details</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
            </div>
            </div>
        </div>
    </div>

    <script src="https://d3js.org/d3.v7.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.7/dist/js/bootstrap.bundle.min.js" integrity="sha384-ndDqU0Gzau9qJ1lfW4pNLlhNTkCfHzAVBReH9diLvGRem5+R9g2FzA8ZGN954O5Q" crossorigin="anonymous"></script>

    <!-- FileSaver, PDFKit -->
    <script src="static/vendor/FileSaver.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/pdfkit@0.17.1/js/pdfkit.standalone.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/svg-to-pdfkit@0.1.8/source.min.js"></script>

    <!-- Para exportar a PDF los emojis -->
     <script src="https://cdn.jsdelivr.net/npm/twemoji@14.0.2/dist/twemoji.min.js"></script>

    <script defer src="static/js/icore.js"></script>
    <script defer src="static/js/utils.js"></script>
    <script defer src="static/js/persistence.js"></script>
    <script defer src="static/js/main.js"></script>
    <script defer src="static/js/drawPublications.js"></script>
    <script defer src="static/vendor/bibtexParse.js"></script>
    <script defer src="static/js/bibToJSON.js"></script>
    <script defer src="static/js/dblp.js"></script>
</body>
</html>